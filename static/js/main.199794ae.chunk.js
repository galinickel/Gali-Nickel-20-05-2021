(this.webpackJsonpvideos=this.webpackJsonpvideos||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(17),a=n.n(c),i=n(32),s=n(14),o=n(4),u=(n(37),n(38),n(39),n(3)),l=n.n(u),d=n(8),f=n(12),j=n(5),h=n(21),p=n.n(h),v="?apikey=dWRWgogZNXfdk0HgKAeRAkpJ0nnMq5Yf",b="https://dataservice.accuweather.com/locations/v1/cities/autocomplete",O="https://dataservice.accuweather.com/forecasts/v1/daily/5day/",m={query:function(e){return y.apply(this,arguments)},getWeather:function(e){return x.apply(this,arguments)}};function y(){return(y=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.get(b+v+"&q="+t+"&language=en-us").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.get(O+t.Key+v+"&language=en-us&details=true&metric=true").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={query:N,getById:function(e,t){return N(e).then((function(e){return e.find((function(e){return e.id===t}))}))},post:function(e,t){return t.id=T(),N(e).then((function(n){return n.unshift(t),w(e,n),t}))},remove:function(e,t){return N(e).then((function(n){var r=n.findIndex((function(e){return e.id===t}));n.splice(r,1),w(e,n)}))},saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t)||null)},loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}};function N(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function w(e,t){localStorage.setItem(e,JSON.stringify(t))}function T(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var S=function(e){e({type:"TOGGLE_UNIT"})},E=function(e){e({type:"TOGGLE_MODE"})},I=function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.query(e);case 2:r=t.sent,n({type:"SEARCH_CITY",payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_CITY",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=n(1),C=function(e){var t=Object(j.b)(),n=Object(j.c)((function(e){return e.cityList})),c=Object(r.useState)([]),a=Object(f.a)(c,2),i=a[0],s=a[1],o=e.listType;Object(r.useEffect)((function(){t(function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.query("favoriteCities");case 2:return n=e.sent,e.abrupt("return",Promise.resolve(t({type:"GET_FAVORITES",payload:n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){s(e.payload)}))}),[i.length]);var u=function(e){s([]),t(function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){var r,c,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.query("favoriteCities");case 2:if(c=t.sent,a=c.find((function(t){return t.LocalizedName===e.LocalizedName}))){t.next=10;break}return t.next=7,g.post("favoriteCities",e);case 7:r=t.sent,t.next=13;break;case 10:return t.next=12,g.remove("favoriteCities",a.id);case 12:r=t.sent;case 13:n({type:"SET_FAVORITES",payload:r});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},h=function(t){if("searchOptions"!==o||n!==[]&&n)return t.map((function(t,n){var r=i.find((function(e){return e.Key===t.Key}));return Object(F.jsxs)("div",{className:"item ui ".concat("favorites"===o?"card favorite-item five wide column":null," "),children:[Object(F.jsxs)("div",{className:"header",onClick:function(){return e.onSelect(t)},tabIndex:"0",children:[Object(F.jsx)("i",{className:"".concat(t.Country.ID.toLowerCase()," flag")}),t.LocalizedName]},t.Key),Object(F.jsxs)("div",{className:"description",onClick:function(){return u(t)},children:[Object(F.jsx)("i",{className:"plus circle icon"}),r?"Remove from Favorites":"Add to Favorites"]},t.LocalizedName)]},n)}))};return Object(F.jsx)("div",{className:"favorites"===o?"ui container":null,children:Object(F.jsxs)("div",{className:"favorites"===o&&i.length?"ui relaxed grid ":"ui divided list",children:["searchOptions"===o&&h(n),"favorites"===o&&h(i),"favorites"===o&&!i.length&&Object(F.jsxs)("div",{className:"favorites-empty-msg",children:[" ",Object(F.jsx)("p",{children:"It seems awfully empty in here! Why not search some cities, and add them to your favorites?"})]})]})})},D=function(){var e=Object(j.b)(),t=Object(r.useState)(""),n=Object(f.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!1),s=Object(f.a)(i,2),o=s[0],u=s[1],h=Object(r.useRef)(null),p=Object(j.c)((function(e){return e.city.LocalizedName}));Object(r.useEffect)((function(){return document.addEventListener("mousedown",v),a(p),function(){return document.removeEventListener("mousedown",v)}}),[p]);var v=function(e){var t=h.current;t&&!t.contains(e.target)&&u(!1)},b=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),a(n.target.value),e(I(c));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(F.jsxs)("div",{ref:h,className:" ",children:[Object(F.jsx)("h3",{children:" Search a City..."}),Object(F.jsx)("input",{type:"text",placeholder:"Type to Search...",onChange:b,value:c,onClick:function(){return u(!o)}}),Object(F.jsx)("div",{className:"options-list",style:o?{transform:"scaleY(1)"}:{transform:"scaleY(0)"},children:Object(F.jsx)(C,{onSelect:function(t){a(t.LocalizedName),e(k(t))},listType:"searchOptions"})})]})},L=function(){var e,t=Object(j.b)(),n=Object(j.c)((function(e){return e.city})),c=Object(j.c)((function(e){return e.dayMode})),a=Object(j.c)((function(e){return e.unit})),i=Object(j.c)((function(e){return e.weather})),s=Object(r.useState)("Loading..."),o=Object(f.a)(s,2),u=o[0],h=o[1],p=Object(r.useState)("Loading"),v=Object(f.a)(p,2),b=v[0],O=v[1];Object(r.useEffect)((function(){var e;t((e=n,function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.getWeather(e);case 3:r=t.sent,n({type:"GET_WEATHER",payload:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Had an error getting to AccuWeather API.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,n]),i.DailyForecasts?e=c?i.DailyForecasts[0].Day.Icon:i.DailyForecasts[0].Night.Icon:setTimeout((function(){h("We're having some technical difficulties! Please try again later."),O("Error")}),2e3);var y=function(t){if(e){var n=c?i.DailyForecasts[t].Temperature.Maximum.Value:i.DailyForecasts[t].Temperature.Minimum.Value;return a?Math.floor(n):Math.floor(9*n/5+32)}};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{children:!i.DailyForecasts&&Object(F.jsx)("div",{className:"ui card",children:Object(F.jsxs)("div",{className:"content",children:[Object(F.jsx)("h4",{className:"header",children:b}),Object(F.jsx)("p",{children:u})]})})}),i.DailyForecasts&&Object(F.jsx)("div",{children:function(){if(e)return i.DailyForecasts.map((function(t,r){e=c?i.DailyForecasts[r].Day.Icon:i.DailyForecasts[r].Night.Icon;var a=c?i.DailyForecasts[r].Day.ShortPhrase:i.DailyForecasts[r].Night.ShortPhrase;return Object(F.jsx)("div",{className:" ui card",children:Object(F.jsxs)("div",{className:"content",children:[Object(F.jsxs)("h3",{className:"header",children:[n.LocalizedName," ",Object(F.jsx)("span",{children:t.Date.substring(5,10)})]}),Object(F.jsxs)("p",{className:"ui description",children:[e?e<10?Object(F.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/0".concat(e,"-s.png"),alt:"weather icon"}):Object(F.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png"),alt:"weather icon"}):void 0,y(r)," \xb0"]}),Object(F.jsx)("p",{children:a}),Object(F.jsx)("a",{href:i.Headline.Link,children:"See More"})]})},r)}))}()})]})},A=function(){return Object(F.jsxs)("div",{className:"ui container ",children:[Object(F.jsx)(D,{}),Object(F.jsx)(L,{})]})},M=function(){var e=Object(o.e)(),t=Object(j.b)();return Object(F.jsxs)("div",{className:"favorites-page",children:[Object(F.jsx)("p",{children:"Below you'll find your favorites. Clicking a favorite city will show you it's weather forecast."}),Object(F.jsx)("div",{className:"ui horizontal divider",children:"Your Favorites"}),Object(F.jsx)(C,{onSelect:function(n){t(k(n)),e.push("/")},listType:"favorites"})]})},R=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.unit})),n=Object(j.c)((function(e){return e.dayMode})),c=(new Date).getHours();Object(r.useEffect)((function(){c<18&&c<5&&e(E)}),[c]);return Object(F.jsxs)("div",{className:"ui secondary pointing menu",children:[Object(F.jsx)(s.b,{to:"/",className:"item",children:Object(F.jsx)("h3",{children:"Weather"})}),Object(F.jsxs)("div",{className:"right menu",children:[Object(F.jsx)(s.b,{to:"/favorites",className:"item",children:Object(F.jsx)("h3",{children:"Favorites"})}),Object(F.jsxs)("button",{className:" ui button",onClick:function(){return e(S)},children:[t?"C":"F","\xb0"]}),Object(F.jsx)("button",{className:" ui labeled icon button",onClick:function(){return e(E)},children:n?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("i",{className:"sun icon"}),"Day Mode"]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("i",{className:"moon icon"}),"Night Mode"]})})]})]})},_=function(){return Object(F.jsx)("div",{className:"ui  container",children:Object(F.jsxs)(s.a,{children:[Object(F.jsx)(R,{}),Object(F.jsxs)("div",{className:"App ui container  app-main",children:[Object(F.jsx)(o.a,{path:"/favorites",exact:!0,component:M}),Object(F.jsx)(o.a,{path:"/",exact:!0,component:A})]})]})})},G=n(16),z={Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"},id:"WM8brNU"},W=Object(d.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:[],n=r.length>1?r[1]:void 0,e.t0=n.type,e.next="SET_FAVORITES"===e.t0?5:"GET_FAVORITES"===e.t0?6:7;break;case 5:case 6:return e.abrupt("return",n.payload);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),q=Object(G.b)({cityList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_CITY":return t.payload;default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_WEATHER":return t.payload;default:return e}},city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return t.payload;default:return e}},favoriteCities:W,unit:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_UNIT":return!e;default:return e}},dayMode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MODE":return!e;default:return e}}}),H=Object(G.c)(q,Object(G.a)(i.a));a.a.render(Object(F.jsx)(j.a,{store:H,children:Object(F.jsx)(_,{})}),document.querySelector("#root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.199794ae.chunk.js.map