(this.webpackJsonpvideos=this.webpackJsonpvideos||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(17),a=n.n(c),i=n(32),s=n(14),o=n(5),u=n(2),l=n(4),d=n.n(l),f=n(6),j=n(19),h=n.n(j),b="?apikey=dWRWgogZNXfdk0HgKAeRAkpJ0nnMq5Yf",v="https://dataservice.accuweather.com/locations/v1/cities/autocomplete",p="https://dataservice.accuweather.com/forecasts/v1/daily/5day/",O="https://dataservice.accuweather.com/locations/v1/cities/geoposition/search",m={query:function(e){return y.apply(this,arguments)},getWeather:function(e){return x.apply(this,arguments)},getCityFromGeolocation:function(e,t){return g.apply(this,arguments)}};function y(){return(y=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get(v+b+"&q="+t+"&language=en-us").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get(p+t.Key+b+"&language=en-us&details=true&metric=true").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(f.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get(O+b+"&q="+t+","+n).then((function(e){return e.data.Key})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N={query:w,getById:function(e,t){return w(e).then((function(e){return e.find((function(e){return e.id===t}))}))},post:function(e,t){return t.id=k(),w(e).then((function(n){return n.unshift(t),T(e,n),t}))},remove:function(e,t){return w(e).then((function(n){var r=n.findIndex((function(e){return e.id===t}));n.splice(r,1),T(e,n)}))},saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t)||null)},loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}};function w(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function T(e,t){localStorage.setItem(e,JSON.stringify(t))}function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var S=function(e){e({type:"TOGGLE_UNIT"})},F=function(e){e({type:"TOGGLE_MODE"})},C=function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_CITY",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=(n(60),n(61),n(12)),I=n(1),D=function(e){var t=e.listType,n=e.city,r=e.isInFavorites,c=e.toggleFavoriteCity;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:"item ui ".concat("favorites"===t?"card favorite-item five wide column":"search-result"," "),children:[Object(I.jsx)("div",{className:"header",onClick:function(){return e.onSelect(n)},tabIndex:"0",children:"fonselectavorites"===t?Object(I.jsxs)(I.Fragment,{children:[" ",Object(I.jsxs)("h3",{children:[Object(I.jsx)("i",{className:"".concat(n.Country.ID.toLowerCase()," flag")}),n.LocalizedName]}),Object(I.jsx)("h5",{children:"See Forecast"})]}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("p",{children:[Object(I.jsx)("i",{className:"".concat(n.Country.ID.toLowerCase()," flag")}),n.LocalizedName]})})}),"favorites"===t&&Object(I.jsx)("div",{className:"ui clearing divider"}),Object(I.jsxs)("div",{className:"description",onClick:function(){return c(n)},children:[Object(I.jsx)("i",{className:"plus circle icon"}),r?"Remove from Favorites":"Add to Favorites"]})]},n.id)})},L=function(e){var t=Object(u.b)(),n=Object(u.c)((function(e){return e.cityList})),c=(Object(u.c)((function(e){return e.favoriteCities})),Object(r.useState)([])),a=Object(E.a)(c,2),i=a[0],s=a[1],o=e.listType;Object(r.useEffect)((function(){t(function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.query("favoriteCities");case 2:return n=e.sent,e.abrupt("return",Promise.resolve(t({type:"GET_FAVORITES",payload:n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){s(e.payload)}))}),[i.length]);var l=function(e){t(function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){var r,c,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.query("favoriteCities");case 2:if(c=t.sent,a=c.find((function(t){return t.LocalizedName===e.LocalizedName}))){t.next=10;break}return t.next=7,N.post("favoriteCities",e);case 7:r=t.sent,t.next=13;break;case 10:return t.next=12,N.remove("favoriteCities",a.id);case 12:r=t.sent;case 13:n({type:"SET_FAVORITES",payload:r});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),s([])},j=function(e){if("searchOptions"!==o||n!==[]&&n)return e.map((function(e){var t=i.find((function(t){return t.Key===e.Key}));return Object(I.jsx)(D,{isInFavorites:t,city:e,listType:o,toggleFavoriteCity:l},e.Key)}))};return Object(I.jsx)("div",{className:"favorites"===o?"ui container":null,children:Object(I.jsxs)("div",{className:"favorites"===o&&i.length?"ui relaxed grid ":"ui divided list",children:["searchOptions"===o&&j(n),"favorites"===o&&j(i),"favorites"===o&&!i.length&&Object(I.jsxs)("div",{className:"favorites-empty-msg",children:[" ",Object(I.jsx)("p",{children:"It seems awfully empty in here! Why not search some cities, and add them to your favorites?"})]})]})})},A=n(33),M=n.n(A),G=function(){var e=Object(u.c)((function(e){return e.dayMode})),t=Object(r.useState)("Click to check the forecast for your location!"),n=Object(E.a)(t,2),c=n[0],a=n[1],i=Object(u.b)(),s=function(e){var t,n;i((t=e.coords.latitude,n=e.coords.longitude,function(){var e=Object(f.a)(d.a.mark((function e(r){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),e.prev=1,e.next=4,m.getCityFromGeolocation(t,n);case 4:return c=e.sent,e.next=7,m.getWeather(c);case 7:a=e.sent,r({type:"GET_WEATHER",payload:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()))},o=function(e){console.log(e),a("Please allow this app to access your location.")};return Object(I.jsxs)("div",{children:[Object(I.jsxs)("button",{className:e?"ui button labeled icon":"ui button inverted basic labeled violet icon",onClick:function(){navigator.geolocation.getCurrentPosition(s,o)},children:[Object(I.jsx)("i",{className:"location arrow icon"}),"Search My Location"]}),Object(I.jsx)("p",{children:c})]})},R=function(){var e=Object(u.b)(),t=Object(r.useState)(""),n=Object(E.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(!1),s=Object(E.a)(i,2),o=s[0],l=s[1],j=Object(r.useRef)(null),h=Object(u.c)((function(e){return e.city.LocalizedName})),b=Object(u.c)((function(e){return e.dayMode}));Object(r.useEffect)((function(){return document.addEventListener("mousedown",v),function(){return document.removeEventListener("mousedown",v)}}),[h]);var v=function(e){var t=j.current;t&&!t.contains(e.target)&&l(!1)},p=function(){var t=Object(f.a)(d.a.mark((function t(n){var r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(r=n.nativeEvent.data)){t.next=6;break}if((i=r.charCodeAt(0))>=65&&i<=90||i>=97&&i<=122){t.next=6;break}return t.abrupt("return");case 6:if(a(n.target.value),n.target.value){t.next=9;break}return t.abrupt("return");case 9:M()((function(){return e((t=c,function(){var e=Object(f.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.query(t);case 3:r=e.sent,n({type:"SEARCH_CITY",payload:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Had an error getting to AccuWeather API.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));var t}),850)();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{ref:j,children:[Object(I.jsx)(G,{}),Object(I.jsx)("h3",{children:" Search a City..."}),Object(I.jsx)("input",{type:"text",placeholder:"Type to Search...",onChange:p,value:c,onClick:function(){return l(!o)},className:b?null:"night"}),Object(I.jsx)("div",{className:"options-list",style:o?{transform:"scaleY(1)"}:{transform:"scaleY(0)"},children:Object(I.jsx)(L,{onSelect:function(t){a(t.LocalizedName),e(C(t))},listType:"searchOptions"})})]})})},W=function(){var e,t=Object(u.b)(),n=Object(u.c)((function(e){return e.city})),c=Object(u.c)((function(e){return e.dayMode})),a=Object(u.c)((function(e){return e.unit})),i=Object(u.c)((function(e){return e.weather})),s=Object(r.useState)("Loading..."),o=Object(E.a)(s,2),l=o[0],j=o[1],h=Object(r.useState)("Loading"),b=Object(E.a)(h,2),v=b[0],p=b[1];Object(r.useEffect)((function(){var e;t((e=n,function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.getWeather(e);case 3:r=t.sent,n({type:"GET_WEATHER",payload:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Had an error getting to AccuWeather API.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,n]),i.DailyForecasts?e=c?i.DailyForecasts[0].Day.Icon:i.DailyForecasts[0].Night.Icon:setTimeout((function(){j("We're having some technical difficulties! Please try again later."),p("Error")}),2e3);var O=function(t){if(e){var n=c?i.DailyForecasts[t].Temperature.Maximum.Value:i.DailyForecasts[t].Temperature.Minimum.Value;return a?Math.floor(n):Math.floor(9*n/5+32)}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{children:!i.DailyForecasts&&Object(I.jsx)("div",{className:"ui card",children:Object(I.jsxs)("div",{className:"content",children:[Object(I.jsx)("h4",{children:v}),Object(I.jsx)("p",{children:l})]})})}),i.DailyForecasts&&Object(I.jsx)("div",{children:function(){if(e)return i.DailyForecasts.map((function(t,r){e=c?i.DailyForecasts[r].Day.Icon:i.DailyForecasts[r].Night.Icon;var a=c?i.DailyForecasts[r].Day.ShortPhrase:i.DailyForecasts[r].Night.ShortPhrase;return Object(I.jsx)("div",{className:" ui card",children:Object(I.jsxs)("div",{className:"content",children:[Object(I.jsxs)("h3",{className:"header",children:[n.LocalizedName," ",Object(I.jsx)("span",{children:t.Date.substring(5,10)})]}),Object(I.jsxs)("p",{className:"ui description",children:[e?e<10?Object(I.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/0".concat(e,"-s.png"),alt:"weather icon"}):Object(I.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png"),alt:"weather icon"}):void 0,O(r)," \xb0"]}),Object(I.jsx)("p",{children:a}),Object(I.jsx)("a",{href:i.Headline.Link,children:"See More"})]})},r)}))}()})]})},_=function(){return Object(I.jsxs)("div",{className:"ui container ",children:[Object(I.jsx)(R,{}),Object(I.jsx)(W,{})]})},z=function(){var e=Object(o.e)(),t=Object(u.b)();return Object(I.jsxs)("div",{className:"favorites-page",children:[Object(I.jsx)("p",{children:"Below you'll find your favorites. Clicking a favorite city will show you it's weather forecast."}),Object(I.jsx)("div",{className:"ui horizontal divider",children:"Your Favorites"}),Object(I.jsx)(L,{onSelect:function(n){t(C(n)),e.push("/")},listType:"favorites"})]})},H=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.unit})),n=Object(u.c)((function(e){return e.dayMode}));return Object(I.jsxs)("div",{className:n?"ui secondary pointing menu":"ui secondary pointing menu night",children:[Object(I.jsx)(s.b,{to:"/",className:"item",children:Object(I.jsx)("h3",{children:"Weather"})}),Object(I.jsxs)("div",{className:"right menu",children:[Object(I.jsx)(s.b,{to:"/favorites",className:"item",children:Object(I.jsx)("h3",{children:"Favorites"})}),Object(I.jsxs)("button",{className:n?"ui button":"ui button inverted basic violet",onClick:function(){return e(S)},children:[t?"C":"F","\xb0"]}),Object(I.jsx)("button",{className:n?"ui labeled icon button":"ui button  labeled icon  inverted basic violet",onClick:function(){return e(F)},children:n?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("i",{className:"sun icon"}),"Day Mode"]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("i",{className:"moon icon"}),"Night Mode"]})})]})]})},q=function(){var e=(new Date).getHours(),t=Object(u.b)();Object(r.useEffect)((function(){e<18&&e<5&&t(F)}),[]);var n=Object(u.c)((function(e){return e.dayMode}));return Object(I.jsx)("div",{className:n?"background-day":"background-night",children:Object(I.jsx)("div",{className:n?"ui  container main-app ":"ui  container main-app night",children:Object(I.jsxs)(s.a,{children:[Object(I.jsx)(H,{}),Object(I.jsxs)("div",{className:"App ui container  app-main ",children:[Object(I.jsx)(o.a,{path:"/favorites",exact:!0,component:z}),Object(I.jsx)(o.a,{path:"/",exact:!0,component:_})]})]})})})},P=n(16),Y={Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"},id:"WM8brNU"},J=Object(f.a)(d.a.mark((function e(){var t,n,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:[],n=r.length>1?r[1]:void 0,e.t0=n.type,e.next="SET_FAVORITES"===e.t0?5:"GET_FAVORITES"===e.t0?6:7;break;case 5:case 6:return e.abrupt("return",n.payload);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),K=Object(P.b)({cityList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_CITY":return t.payload;default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_WEATHER":return t.payload;default:return e}},city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return t.payload;default:return e}},favoriteCities:J,unit:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_UNIT":return!e;default:return e}},dayMode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MODE":return!e;default:return e}}}),V=Object(P.c)(K,Object(P.a)(i.a));a.a.render(Object(I.jsx)(u.a,{store:V,children:Object(I.jsx)(q,{})}),document.querySelector("#root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.5e094448.chunk.js.map