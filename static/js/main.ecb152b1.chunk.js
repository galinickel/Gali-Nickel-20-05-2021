(this.webpackJsonpvideos=this.webpackJsonpvideos||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(17),c=n.n(a),i=n(32),s=n(14),o=n(5),u=n(3),l=(n(41),n(42),n(43),n(4)),d=n.n(l),f=n(8),j=n(12),h=n(21),v=n.n(h),p="?apikey=dWRWgogZNXfdk0HgKAeRAkpJ0nnMq5Yf",b="https://dataservice.accuweather.com/locations/v1/cities/autocomplete",O="https://dataservice.accuweather.com/forecasts/v1/daily/5day/",m={query:function(e){return y.apply(this,arguments)},getWeather:function(e){return x.apply(this,arguments)}};function y(){return(y=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.get(b+p+"&q="+t+"&language=en-us").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.get(O+t.Key+p+"&language=en-us&details=true&metric=true").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={query:N,getById:function(e,t){return N(e).then((function(e){return e.find((function(e){return e.id===t}))}))},post:function(e,t){return t.id=T(),N(e).then((function(n){return n.unshift(t),w(e,n),t}))},remove:function(e,t){return N(e).then((function(n){var r=n.findIndex((function(e){return e.id===t}));n.splice(r,1),w(e,n)}))},saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t)||null)},loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}};function N(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function w(e,t){localStorage.setItem(e,JSON.stringify(t))}function T(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var S=function(e){e({type:"TOGGLE_UNIT"})},E=function(e){e({type:"TOGGLE_MODE"})},k=function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"SET_CITY",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=n(1),F=function(e){var t=Object(u.b)(),n=Object(u.c)((function(e){return e.cityList})),a=Object(r.useState)([]),c=Object(j.a)(a,2),i=c[0],s=c[1],o=e.listType;Object(r.useEffect)((function(){t(function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.query("favoriteCities");case 2:return n=e.sent,e.abrupt("return",Promise.resolve(t({type:"GET_FAVORITES",payload:n})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){s(e.payload)}))}),[i.length]);var l=function(e){s([]),t(function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){var r,a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.query("favoriteCities");case 2:if(a=t.sent,c=a.find((function(t){return t.LocalizedName===e.LocalizedName}))){t.next=10;break}return t.next=7,g.post("favoriteCities",e);case 7:r=t.sent,t.next=13;break;case 10:return t.next=12,g.remove("favoriteCities",c.id);case 12:r=t.sent;case 13:n({type:"SET_FAVORITES",payload:r});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},h=function(t){if("searchOptions"!==o||n!==[]&&n)return t.map((function(t,n){var r=i.find((function(e){return e.Key===t.Key}));return Object(I.jsxs)("div",{className:"item ui ".concat("favorites"===o?"card favorite-item five wide column":null," "),children:[Object(I.jsx)("div",{className:"header",onClick:function(){return e.onSelect(t)},tabIndex:"0",children:"favorites"===o?Object(I.jsxs)(I.Fragment,{children:[" ",Object(I.jsxs)("h3",{children:[Object(I.jsx)("i",{className:"".concat(t.Country.ID.toLowerCase()," flag")}),t.LocalizedName]}),Object(I.jsx)("h5",{children:"See Forecast"})]}):Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("p",{children:[Object(I.jsx)("i",{className:"".concat(t.Country.ID.toLowerCase()," flag")}),t.LocalizedName]})})},t.Key),Object(I.jsx)("div",{className:"favorites"===o?"ui clearing divider":null}),Object(I.jsxs)("div",{className:"description",onClick:function(){return l(t)},children:[Object(I.jsx)("i",{className:"plus circle icon"}),r?"Remove from Favorites":"Add to Favorites"]},t.LocalizedName)]},n)}))};return Object(I.jsx)("div",{className:"favorites"===o?"ui container":null,children:Object(I.jsxs)("div",{className:"favorites"===o&&i.length?"ui relaxed grid ":"ui divided list",children:["searchOptions"===o&&h(n),"favorites"===o&&h(i),"favorites"===o&&!i.length&&Object(I.jsxs)("div",{className:"favorites-empty-msg",children:[" ",Object(I.jsx)("p",{children:"It seems awfully empty in here! Why not search some cities, and add them to your favorites?"})]})]})})},C=n(33),D=n.n(C),L=function(){var e=Object(u.b)(),t=Object(r.useState)(""),n=Object(j.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!1),s=Object(j.a)(i,2),o=s[0],l=s[1],h=Object(r.useRef)(null),v=Object(u.c)((function(e){return e.city.LocalizedName}));Object(r.useEffect)((function(){return document.addEventListener("mousedown",p),function(){return document.removeEventListener("mousedown",p)}}),[v]);var p=function(e){var t=h.current;t&&!t.contains(e.target)&&l(!1)},b=function(){var t=Object(f.a)(d.a.mark((function t(n){var r,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(r=n.nativeEvent.data)){t.next=6;break}if((i=r.charCodeAt(0))>=65&&i<=90||i>=97&&i<=122){t.next=6;break}return t.abrupt("return");case 6:c(n.target.value),D()((function(){return e((t=a,function(){var e=Object(f.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.query(t);case 3:r=e.sent,n({type:"SEARCH_CITY",payload:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Had an error getting to AccuWeather API.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));var t}),850)();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(I.jsxs)("div",{ref:h,className:" ",children:[Object(I.jsx)("h3",{children:" Search a City..."}),Object(I.jsx)("input",{type:"text",placeholder:"Type to Search...",onChange:b,value:a,onClick:function(){return l(!o)}}),Object(I.jsx)("div",{className:"options-list",style:o?{transform:"scaleY(1)"}:{transform:"scaleY(0)"},children:Object(I.jsx)(F,{onSelect:function(t){c(t.LocalizedName),e(k(t))},listType:"searchOptions"})})]})},A=function(){var e,t=Object(u.b)(),n=Object(u.c)((function(e){return e.city})),a=Object(u.c)((function(e){return e.dayMode})),c=Object(u.c)((function(e){return e.unit})),i=Object(u.c)((function(e){return e.weather})),s=Object(r.useState)("Loading..."),o=Object(j.a)(s,2),l=o[0],h=o[1],v=Object(r.useState)("Loading"),p=Object(j.a)(v,2),b=p[0],O=p[1];Object(r.useEffect)((function(){var e;t((e=n,function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.getWeather(e);case 3:r=t.sent,n({type:"GET_WEATHER",payload:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Had an error getting to AccuWeather API.");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,n]),i.DailyForecasts?e=a?i.DailyForecasts[0].Day.Icon:i.DailyForecasts[0].Night.Icon:setTimeout((function(){h("We're having some technical difficulties! Please try again later."),O("Error")}),2e3);var y=function(t){if(e){var n=a?i.DailyForecasts[t].Temperature.Maximum.Value:i.DailyForecasts[t].Temperature.Minimum.Value;return c?Math.floor(n):Math.floor(9*n/5+32)}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{children:!i.DailyForecasts&&Object(I.jsx)("div",{className:"ui card",children:Object(I.jsxs)("div",{className:"content",children:[Object(I.jsx)("h4",{children:b}),Object(I.jsx)("p",{children:l})]})})}),i.DailyForecasts&&Object(I.jsx)("div",{children:function(){if(e)return i.DailyForecasts.map((function(t,r){e=a?i.DailyForecasts[r].Day.Icon:i.DailyForecasts[r].Night.Icon;var c=a?i.DailyForecasts[r].Day.ShortPhrase:i.DailyForecasts[r].Night.ShortPhrase;return Object(I.jsx)("div",{className:" ui card",children:Object(I.jsxs)("div",{className:"content",children:[Object(I.jsxs)("h3",{className:"header",children:[n.LocalizedName," ",Object(I.jsx)("span",{children:t.Date.substring(5,10)})]}),Object(I.jsxs)("p",{className:"ui description",children:[e?e<10?Object(I.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/0".concat(e,"-s.png"),alt:"weather icon"}):Object(I.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png"),alt:"weather icon"}):void 0,y(r)," \xb0"]}),Object(I.jsx)("p",{children:c}),Object(I.jsx)("a",{href:i.Headline.Link,children:"See More"})]})},r)}))}()})]})},M=function(){return Object(I.jsxs)("div",{className:"ui container ",children:[Object(I.jsx)(L,{}),Object(I.jsx)(A,{})]})},R=function(){var e=Object(o.e)(),t=Object(u.b)();return Object(I.jsxs)("div",{className:"favorites-page",children:[Object(I.jsx)("p",{children:"Below you'll find your favorites. Clicking a favorite city will show you it's weather forecast."}),Object(I.jsx)("div",{className:"ui horizontal divider",children:"Your Favorites"}),Object(I.jsx)(F,{onSelect:function(n){t(k(n)),e.push("/")},listType:"favorites"})]})},_=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.unit})),n=Object(u.c)((function(e){return e.dayMode})),a=(new Date).getHours();Object(r.useEffect)((function(){a<18&&a<5&&e(E)}),[a]);return Object(I.jsxs)("div",{className:n?"ui secondary pointing menu":"ui secondary pointing menu night",children:[Object(I.jsx)(s.b,{to:"/",className:"item",children:Object(I.jsx)("h3",{children:"Weather"})}),Object(I.jsxs)("div",{className:"right menu",children:[Object(I.jsx)(s.b,{to:"/favorites",className:"item",children:Object(I.jsx)("h3",{children:"Favorites"})}),Object(I.jsxs)("button",{className:n?"ui button":"ui button inverted basic violet",onClick:function(){return e(S)},children:[t?"C":"F","\xb0"]}),Object(I.jsx)("button",{className:n?"ui labeled icon button":"ui button  labeled icon  inverted basic violet",onClick:function(){return e(E)},children:n?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("i",{className:"sun icon"}),"Day Mode"]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("i",{className:"moon icon"}),"Night Mode"]})})]})]})},z=function(){var e=Object(u.c)((function(e){return e.dayMode}));return Object(I.jsx)("div",{className:e?"background-day":"background-night",children:Object(I.jsx)("div",{className:e?"ui  container main-app ":"ui  container main-app night",children:Object(I.jsxs)(s.a,{children:[Object(I.jsx)(_,{}),Object(I.jsxs)("div",{className:"App ui container  app-main ",children:[Object(I.jsx)(o.a,{path:"/favorites",exact:!0,component:R}),Object(I.jsx)(o.a,{path:"/weather",exact:!0,component:M})]})]})})})},G=n(16),W={Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"},id:"WM8brNU"},H=Object(f.a)(d.a.mark((function e(){var t,n,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:[],n=r.length>1?r[1]:void 0,e.t0=n.type,e.next="SET_FAVORITES"===e.t0?5:"GET_FAVORITES"===e.t0?6:7;break;case 5:case 6:return e.abrupt("return",n.payload);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),q=Object(G.b)({cityList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_CITY":return t.payload;default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_WEATHER":return t.payload;default:return e}},city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return t.payload;default:return e}},favoriteCities:H,unit:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_UNIT":return!e;default:return e}},dayMode:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MODE":return!e;default:return e}}}),Y=Object(G.c)(q,Object(G.a)(i.a));c.a.render(Object(I.jsx)(u.a,{store:Y,children:Object(I.jsx)(z,{})}),document.querySelector("#root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.ecb152b1.chunk.js.map